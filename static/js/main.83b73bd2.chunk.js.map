{"version":3,"sources":["fonts/BentonSansCond-Regular.otf","fonts/BentonSansCond-RegItalic.otf","fonts/BentonSansCond-Bold.otf","fonts/BentonSansCond-BoldItalic.otf","fonts/Shift-Bold.otf","fonts/Shift-BoldItalic.otf","components/WildfireTooltip/WildfireTooltip.js","components/CircleMap/CircleMap.js","components/SummaryBox/SummaryBox.js","components/FireListing/FireListing.js","components/WildfireMap/WildfireMap.js","components/WildfireTracker/WildfireTracker.js","data/mapbox-config.js","components/App/App.js","serviceWorker.js","index.js"],"names":["module","exports","WildfireTooltip","props","GEOGRAPHIC","FIRE_STATU","toLowerCase","replace","size","CURRENT_SI","toFixed","checkSize","ignition_date","text","FIRE_CAUSE","CircleMap","state","popup","mapboxgl","Popup","closeButton","closeOnClick","showPopup","bind","hidePopup","data","this","extent_calcuted","range","accessToken","config","map","Map","center","container","mapContainer","maxZoom","minZoom","style","mapboxStyle","zoom","features","renderMap","prevProps","mapIsLoaded","getSource","setData","selectedFeature","flyToLocation","currentFeature","flyTo","geometry","coordinates","fire_size","forEach","d","push","parseFloat","properties","Math","min","max","getCanvas","cursor","remove","extent","value","getExtent","i","radius","mapRange","log","sort","a","b","e","sidebarClick","coords","lng","lat","setupPopupText","lngLat","setLngLat","setHTML","addTo","prepData","on","firstSymbolId","layers","getStyle","length","type","id","addSource","url","addLayer","source","paint","minzoom","filter","layout","addControl","NavigationControl","setState","ref","el","Component","SummaryBox","fire_stats","stats","out_fires","new_fires","held_fires","controlled_fires","last_update","hectares_burned","reduce","sum","item","km_burned","total_fires","ts","timestamp","Date","parseInt","month","month_num","getUTCMonth","toLocaleDateString","split","getUTCFullYear","toLocaleTimeString","returnCurrentTime","calculateFireStats","className","onClick","toggleFireTypeHandler","buttonStatus","toggleSidebar","console","sidebar","document","getElementById","target","FireListing","list","fon","clickHandler","round","name","FIRE_NT_NM","sizeText","key","FIRE_NUMBE","fire_id","location","ListItem","onChange","htmlFor","window","innerWidth","WildfireTracker","map_options","classField","circleMarkerClassField","data_all","data_fon","selected_feature","Axios","get","currentData","then","resp","noOut","setupFiresOfNote","promises","fonData","firePerimeters","all","results","fon_data","includes","fires_of_note","FIRE_NT_ID","fire_name","fire_class","data_array","fire_status","parentNode","fire_data","data_displayed","filterFireData","mapboxConfig","tiles","mapbox_config","App","Boolean","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.83b73bd2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/BentonSansCond-Regular.43cd4ac7.otf\";","module.exports = __webpack_public_path__ + \"static/media/BentonSansCond-RegItalic.69a4217c.otf\";","module.exports = __webpack_public_path__ + \"static/media/BentonSansCond-Bold.6f6753fd.otf\";","module.exports = __webpack_public_path__ + \"static/media/BentonSansCond-BoldItalic.a6640d89.otf\";","module.exports = __webpack_public_path__ + \"static/media/Shift-Bold.cdd38a86.otf\";","module.exports = __webpack_public_path__ + \"static/media/Shift-BoldItalic.5c3edbfd.otf\";","// import React from 'react';\nimport './WildfireTooltip.css';\n\nconst WildfireTooltip = (props) => {\n\treturn `\n\t\t<div>\n\t\t\t<h3>${props.GEOGRAPHIC}</h3>\n\t\t\t<p class=\"status ${props.FIRE_STATU.toLowerCase().replace(/\\s/g, '-')}\">Status: ${props.FIRE_STATU}</p>\n\t\t\t<p>A fire of ${checkSize(props)} square kilometres started on ${props.ignition_date}.</p>\n\n\t\t\t<p>Suspected cause: ${formatFireCause(props.FIRE_CAUSE)}</p>\n\t\t</div>\n\t`;\n};\n\nfunction checkSize(props) {\n\tlet size = (props.CURRENT_SI / 100).toFixed(2);\n\treturn size < 0.01 ? 'less than 0.01' : size;\n}\n\nfunction formatFireCause(text) {\n\treturn text === '' ? 'unknown' : text.toLowerCase();\n}\n\nexport default WildfireTooltip;","import React, { Component } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport WildfireTooltip from '../WildfireTooltip/WildfireTooltip';\n\nimport './CircleMap.css';\n\nconst evacZoomLevel = 6;\nconst evacMinSize = 220000000;\n//srs=EPSG:3857& - mapbox projection\n//srs=EPSG:3005& - wms projection\nlet wmsLayer = 'https://openmaps.gov.bc.ca/geo/pub/WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP/ows?service=WMS&request=GetMap&crs=EPSG:4326&\\\nformat=image/png&transparent=true&height=450&width=750&\\\nlayers=pub:WHSE_HUMAN_CULTURAL_ECONOMIC.EMRG_ORDER_AND_ALERT_AREAS_SP&\\\nbbox=-139,48,-110,61';\n\n// bbox=-139.0522011144566932,47.6321414425716867,-110.4276991602271494,60.5985243564883049'\n\nexport class CircleMap extends Component {\n\tmap;\n\tstate = {};\n\t// prep the popup\n\tpopup = new mapboxgl.Popup({\n\t\tcloseButton: false,\n\t\tcloseOnClick: true\n\t});\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\t// bind popup to main component\n\t\tthis.showPopup = this.showPopup.bind(this);\n\t\tthis.hidePopup = this.hidePopup.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tconst data = this.props.data;\n\n\t\t// extents for circles\n\t\tthis.extent_calcuted = false;\n\t\t// set the min/max sizes for circles\n\t\tthis.range = this.props.range ? this.props.range : [3,50];\n\n\t\t// API key\n\t\tmapboxgl.accessToken = this.props.config.accessToken;\n\t\t\n\t\tthis.map = new mapboxgl.Map({\n\t\t\t// container: this.props.container,\n\t\t\tcenter: [this.props.center[1], this.props.center[0]],\n\t\t\tcontainer: this.mapContainer,\n\t\t\tmaxZoom: this.props.maxZoom,\n\t\t\tminZoom: this.props.minZoom,\n\t\t\tstyle: this.props.mapboxStyle,\n      \t\tzoom: this.props.zoom\n\t\t});\n\n\t\t// render the map\n\t\tif (data.features) {\n\t\t\tthis.renderMap(data);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (this.state.mapIsLoaded) {\n\t\t\tif (this.props.data !== prevProps.data) {\n\t\t\t    this.map.getSource('wildfires').setData(this.props.data);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.renderMap(this.props.data);\n\t\t}\n\n\t\t// has a feature been selected?\n\t\tif (this.props.selectedFeature && this.props.selectedFeature !== prevProps.data) {\n\t\t\tthis.flyToLocation(this.props.selectedFeature);\n\t\t\tthis.showPopup(this.props.selectedFeature, true)\n\t\t}\n\t}\n\n\tflyToLocation(currentFeature) {\n\t\tthis.map.flyTo({\n\t\t\tcenter: currentFeature.geometry.coordinates,\n\t\t\tzoom: 8\n\t\t});\n\t}\n\t\n\tgetExtent(data) {\n\t\tlet fire_size = [];\n\n\t\tdata.forEach(d => {\n\t\t\tfire_size.push(parseFloat(d.properties.CURRENT_SI));\n\t\t});\n\t\treturn [Math.min(...fire_size), Math.max(...fire_size)];\n\t}\n\n\thidePopup() {\n\t\tthis.map.getCanvas().style.cursor = '';\n\t\tthis.popup.remove();\n\t}\n\n\tmapRange(extent, range, value) {\n\t\treturn range[0] + (value - extent[0]) * (range[1] - range[0]) / (extent[1] - extent[0]);\n\t}\n\t\n\tprepData(data) {\n\t\t// we only want to calculate the extent once, otherwise the circle size changes when toggling by fire_type, which is confusing\n\t\tif (!this.extent_calcuted) {\n\t\t\tthis.extent = this.getExtent(data.features);\n\t\t\tthis.extent_calcuted = true;\n\t\t}\n\n\t\t// calculate circle size\n\t\tdata.features.forEach((d,i) => {\n\t\t\tconst radius = this.mapRange(this.extent, this.range, d.properties.CURRENT_SI);\n\t\t\td.properties.radius = Math.log(radius) * 4;\n\t\t});\n\n\t\t// reorder array by CURRENT_SI, largest -> smallest\n\t\tdata.features.sort((a,b) => {\n\t\t\treturn b.CURRENT_SI - a.CURRENT_SI;\n\t\t});\n\t}\n\n\tsetupPopupText(properties) {\n\t\treturn WildfireTooltip(properties);\n\t}\n\n\tshowPopup(e, sidebarClick) {\n\t\t// console.log(e)\n\t\tlet coords, text;\n\n\t\tif (sidebarClick) {\n\t\t\tcoords = {\n\t\t\t\tlng: e.geometry.coordinates[0],\n\t\t\t\tlat: e.geometry.coordinates[1]\n\t\t\t}\n\t\t\ttext = this.setupPopupText(e.properties);\n\t\t} else {\n\t\t\tcoords = e.lngLat;\n\t\t\ttext = this.setupPopupText(e.features[0].properties);\n\t\t}\n\t\t// change cursor style as UI indicator\n\t\tthis.map.getCanvas().style.cursor = 'pointer';\n\n\t\t// set coords based on mouse position\n\t\tthis.popup.setLngLat(coords)\n\t\t\t// popup content to be displayed\n\t\t\t.setHTML(text)\n\t\t\t.addTo(this.map)\n\t}\n\n\trenderMap(data) {\n\t\tthis.prepData(data);\n\n\t\t// add fire location\n\t\tthis.map.on('load', () => {\n\t\t\t// Find the first symbol layer in the map style so we can keep them on top\n\t\t\tlet firstSymbolId;\n\t\t\tconst layers = this.map.getStyle().layers;\n\t\t\t\n\t\t\tfor (let i = 0; i < layers.length; i++) {\n\t\t\t\tif (layers[i].type === 'symbol') {\n\t\t\t\t\tfirstSymbolId = layers[i].id;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// BC govt evac & alerts wms layer\n\t\t\t// this.map.addSource('evacs-alerts', {\n\t\t\t// \t'scheme': 'tms',\n\t\t\t// \t'tiles': [wmsLayer],\n\t\t\t// \t'tileSize': 256,\n\t\t\t// \ttype: 'raster'\n\t\t\t// });\n\t\t\t// this.map.addLayer({\n\t\t\t// \t'id': 'wms-layer-id',\n\t\t\t// \t'type': 'raster',\n\t\t\t// \t'source': 'evacs-alerts',\n\t\t\t// \t'paint': {}\n\t\t\t// });\n\n\t\t\t// Evac and alerts custom mapbox tileset\n\t\t\tthis.map.addSource('evacs_alerts', {\n\t\t\t\ttype: 'vector',\n\t\t\t\turl: 'mapbox://ngriffiths-postmedia.ckqmy02um05r021lgvokgjxs1-3fgu5'\n\t\t\t});\n\t\t\t// polygons\n\t\t\tthis.map.addLayer({\n\t\t\t\tid: 'evac-data',\n\t\t\t\tsource: 'evacs_alerts',\n\t\t\t\t'source-layer': 'Evacs_and_alerts',\n\t\t\t\ttype: 'fill',\n\t\t\t\tpaint: {\n\t\t\t\t\t'fill-color': [\n\t\t\t\t\t\t'match',\n\t\t\t\t\t\t['get', 'OA_STATUS'],\n\t\t\t\t\t\t'Alert',\n\t\t\t\t\t\t'#FACE7C',\n\t\t\t\t\t\t'Order',\n\t\t\t\t\t\t'#e67154',\n\t\t\t\t\t\t'Tactical',\n\t\t\t\t\t\t'#A7A9AB',\n\t\t\t\t\t\t'#A7A9AB'\n\t\t\t\t\t],\n\t\t\t\t\t'fill-opacity': 0.6\n\t\t\t\t}\n\t\t\t},\n\t\t\t// place layer underneath this layer\n\t\t\tfirstSymbolId);\n\t\t\t// labels\n\t\t\tthis.map.addLayer({\n\t\t\t\tid: 'evac-data-text',\n\t\t\t\tminzoom: evacZoomLevel,\n\t\t\t\tsource: 'evacs_alerts',\n\t\t\t\t'source-layer': 'Evacs_and_alerts',\n\t\t\t\ttype: 'symbol',\n\t\t\t\t// we don't need to label every single evac zone...\n\t\t\t\tfilter: ['>', ['get', 'AREA_SQM'], evacMinSize],\n\t\t\t\tlayout: {\n\t\t\t\t\t'symbol-placement': 'point',\n\t\t\t\t\t'text-field': [\n\t\t\t\t\t\t'format',\n\t\t\t\t\t\t['concat', 'Evacuation ', ['get', 'OA_STATUS']],\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'font-scale': 0.9,\n\t\t\t\t\t\t\t'font-weight': 800\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tpaint: {\n\t\t\t\t\t'text-color': 'rgba(255,255,255,1)',\n\t\t\t\t\t'text-halo-blur': .25,\n\t\t\t\t\t'text-halo-color': [\n\t\t\t\t\t\t'match',\n\t\t\t\t\t\t['get', 'OA_STATUS'],\n\t\t\t\t\t\t'Alert',\n\t\t\t\t\t\t'#F6B31C',\n\t\t\t\t\t\t'Order',\n\t\t\t\t\t\t'#DD2D25',\n\t\t\t\t\t\t'Tactical',\n\t\t\t\t\t\t'#A7A9AB',\n\t\t\t\t\t\t'#A7A9AB' // fallback\n\t\t\t\t\t],\n\t\t\t\t\t'text-halo-width': 1\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// wildfires\n\t\t\tthis.map.addSource('wildfires', {\n\t\t\t\ttype: 'geojson',\n\t\t\t\tdata: data\n\t\t\t});\n\t\t\tthis.map.addLayer({\n\t\t\t\tid: 'wildfires',\n\t\t\t\ttype: 'circle',\n\t\t\t\tsource: 'wildfires',\n\t\t\t\tpaint: {\n\t\t\t\t\t'circle-color': [\n\t\t\t\t\t\t'match',\n\t\t\t\t\t\t['get', 'FIRE_STATU'],\n\t\t\t\t\t\t'New',\n\t\t\t\t\t\t'#DD2D25',\n\t\t\t\t\t\t'Out of Control',\n\t\t\t\t\t\t'#DD2D25',\n\t\t\t\t\t\t'Being Held',\n\t\t\t\t\t\t'#F26B21',\n\t\t\t\t\t\t'Under Control',\n\t\t\t\t\t\t'#0062A3',\n\t\t\t\t\t\t'Out',\n\t\t\t\t\t\t'#6D6E70',\n\t\t\t\t\t\t/* fallback */ '#9b3f86'\n\t\t\t\t\t],\n\t\t\t\t\t'circle-opacity': 0.7,\n\t\t\t\t\t// probably a better way to do this...\n\t\t\t\t\t'circle-radius': [\n\t\t\t\t\t\t'*',\n\t\t\t\t\t\t['get', 'radius'],\n\t\t\t\t\t\t1\n\t\t\t\t\t],\n\t\t\t\t\t'circle-stroke-width': 0.5,\n\t\t\t\t\t'circle-stroke-color': '#FFF'\n\t\t\t\t}\n\t\t\t},\n\t\t\t// place layer underneath this layer\n\t\t\tfirstSymbolId);\n\n\t\t\t// console.log(this.map.getStyle().layers)\n\n\t\t\t// Add zoom and rotation controls to the map.\n\t\t\tthis.map.addControl(new mapboxgl.NavigationControl());\n\n\t\t\t// show & hide the popup\n\t\t\tthis.map.on('mouseenter', 'wildfires', this.showPopup);\n\t\t\tthis.map.on('mouseleave', 'wildfires', this.hidePopup);\n\t\t\tthis.map.on('mouseenter', 'evacs_alerts', this.showPopup);\n\t\t\tthis.map.on('mouseleave', 'evacs_alerts', this.hidePopup);\n\t\t});\n\n\t\tthis.setState({\n\t\t\tmapIsLoaded: true\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div ref={el => this.mapContainer = el} />\n\t\t);\n\t}\n}\n\n\nexport default CircleMap;","import React from 'react';\nimport './SummaryBox.css';\n\nconst SummaryBox = (props) => {\n\tconst fire_stats = calculateFireStats(props);\n\n\treturn (\n\t\t<div className=\"summary-box\" onClick={props.toggleFireTypeHandler}>\n\t\t\t<h2>Latest wildfire stats</h2>\n\t\n\t\t\t<div className=\"stat-box\">\n\t\t\t\t<div className=\"stat\">\n\t\t\t\t\t<p className=\"big-num new\">{fire_stats.new_fires}</p>\n\t\t\t\t\t<p className=\"label\">New</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"stat\">\n\t\t\t\t\t<p className=\"big-num being-held\">{fire_stats.held_fires}</p>\n\t\t\t\t\t<p className=\"label\">Held</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"stat\">\n\t\t\t\t\t<p className=\"big-num under-control\">{fire_stats.controlled_fires}</p>\n\t\t\t\t\t<p className=\"label\">Controlled</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"stat\">\n\t\t\t\t\t<p className=\"big-num out\">{fire_stats.out_fires}</p>\n\t\t\t\t\t<p className=\"label\">Out*</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<p className=\"last-update\">Last updated: {fire_stats.last_update}</p>\n\t\t\t<p className=\"note\">Source: B.C. Wildfire Service. Note: *Tap to toggles views.</p>\n\t\t</div>\n\t);\n}\n\nfunction calculateFireStats(props) {\n\tlet stats = {\n\t\tout_fires: 0,\n\t\tnew_fires: 0,\n\t\theld_fires: 0,\n\t\tcontrolled_fires: 0,\n\t\tlast_update: 'Waiting for data...'\n\t}\n\t\n\tif (props.data.features) {\n\t\tconst data = props.data.features;\n\n\t\tlet hectares_burned = data.reduce((sum, item) => {\n\t\t\treturn sum + parseFloat(item.properties.CURRENT_SI);\n\t\t}, 0);\n\n\t\tstats.km_burned = (hectares_burned / 100).toFixed(0);\n\t\tstats.total_fires = data.length + 1;\n\n\t\tstats.last_update = data.length > 0 ? returnCurrentTime(data[0].properties.last_update) : 'Not available';\n\n\t\tfor (let i = 0; i < data.length; ++i) {\n\t\t\tif (data[i].properties.FIRE_STATU === 'New' | data[i].properties.FIRE_STATU === 'Out of Control' | data[i].properties.FIRE_STATU === 'Fire of Note') {\n\t\t\t\tstats.new_fires++;\n\t\t\t} else if (data[i].properties.FIRE_STATU === 'Being Held') {\n\t\t\t\tstats.held_fires++;\n\t\t\t} else if (data[i].properties.FIRE_STATU === 'Under Control') {\n\t\t\t\tstats.controlled_fires++;\n\t\t\t} else {\n\t\t\t\tstats.out_fires++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn stats;\n}\n\nfunction returnCurrentTime(ts) {\n\tconst timestamp = new Date(parseInt(ts));\n\tconst month = returnMonth(timestamp.getUTCMonth());\n\n\treturn `${month} ${timestamp.toLocaleDateString().split('/')[1]}, ${timestamp.getUTCFullYear()} at ${timestamp.toLocaleTimeString()}`\n}\n\nfunction returnMonth(month_num) {\n\tconst month_lookup = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\n\treturn month_lookup[parseInt(month_num)];\n}\n\n\nexport default SummaryBox;\n","import React from 'react';\nimport './FireListing.css';\n\n\nlet buttonStatus = 'open';\nconst FireListing = (props) => {\n\t// console.log(props.data)\n\tlet list;\n\tconst fon = props.data.length > 0 ? props.data.filter(d => d.properties.FIRE_STATU === 'Fire of Note') : [];\n\n\t// NO FON? HIDE SIDEBAR\n\tif (fon.length > 0) {\n\t\t// YES FON\n\t\tlist = fon.sort((a,b) => {\n\t\t\t\treturn b.properties.CURRENT_SI - a.properties.CURRENT_SI\n\t\t\t})\n\t\t\t.map(d => {\n\t\t\t\treturn ListItem(d.properties, props.flyToLocation);\n\t\t\t});\t\n\t} else {\n\t\t// hide sidebar\n\t\tlist = <li className=\"no-fires\">Currently there are no fires of note in B.C.</li>\n\t}\n\n\n\treturn (\n\t\t<div className=\"sidebar\">\n\t\t\t<div className=\"header\">\n\t\t\t\t<h2>Fires of Note</h2>\n\t\t\t\t<div className=\"button\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"switch\" className=\"open\" onChange={toggleSidebar} /><label htmlFor=\"switch\"></label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ul id=\"listings\" className={`listings ${buttonStatus}`}>\n\t\t\t\t{list}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\n\nfunction ListItem(data, clickHandler) {\n\tconst size = Math.round((data.CURRENT_SI / 100) * 10) / 10;\n\tconst name = data.FIRE_NT_NM; // data.fire_name.split(' (')[0]\n\n\t// console.log(name, data)\n\n\tconst sizeText = size > 0.1 ? `${size} sq. km` : 'Spot fire';\n\treturn (\n\t\t<li key={data.FIRE_NUMBE} id={data.fire_id} className=\"item\" onClick={clickHandler}>\n\t\t\t<h4 className=\"title\">{name}</h4>\n\t\t\t<p className=\"size\">{sizeText}</p>\n\t\t\t<p className=\"location\">{data.location}</p>\n\t\t</li>\n\t);\n}\n\nfunction toggleSidebar(e) {\n\tconsole.log(e)\n\tconst sidebar = document.getElementById('listings');\n\n\tif (buttonStatus === 'open') {\n\t\te.target.className = 'closed';\n\t\tsidebar.className = 'listings closed';\n\t\tbuttonStatus = 'closed';\n\t} else {\n\t\te.target.className = 'open';\n\t\tsidebar.className = 'listings open';\n\t\tbuttonStatus = 'open';\n\t}\n}\n\nexport default FireListing;\n","import React, { Component, Fragment } from 'react';\nimport CircleMap from '../CircleMap/CircleMap';\nimport SummaryBox from '../SummaryBox/SummaryBox';\nimport FireListing from '../FireListing/FireListing';\nimport './WildfireMap.css';\n\n\nlet zoom = window.innerWidth > 400 ? 5 : 4;\nlet center = window.innerWidth > 400 ? [51.5, -124] : [54, -125];\n\nexport class WildfireTracker extends Component {\n\tmap_options = {\n\t\tcenter: center,\n\t\tclassField: 'FIRE_STATU',\n\t\tmaxZoom: 10,\n\t\tminZoom: 3,\n\t\tzoom: zoom\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<h1>B.C. Wildfire Tracker</h1>\n\n\t\t\t\t<CircleMap\n\t\t\t\t\tcenter={this.map_options.center}\n\t\t\t\t\tcircleMarkerClassField={this.map_options.classField}\n\t\t\t\t\tconfig={this.props.config}\n\t\t\t\t\tcontainer=\"mapview\"\n\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\tmapboxStyle={this.props.mapboxStyle}\n\t\t\t\t\tmaxZoom={this.map_options.maxZoom}\n\t\t\t\t\tminZoom={this.map_options.minZoom}\n\t\t\t\t\tselectedFeature={this.props.selectedFeature}\n\t\t\t\t\tzoom={this.map_options.zoom}>\n\t\t\t\t</CircleMap>\n\n\t\t\t\t<SummaryBox\n\t\t\t\t\tdata={this.props.data_all}\n\t\t\t\t\ttoggleFireTypeHandler={this.props.toggleFireTypeHandler}>\n\t\t\t\t</SummaryBox>\n\n\t\t\t\t<FireListing\n\t\t\t\t\tdata={this.props.data_fon}\n\t\t\t\t\tflyToLocation={this.props.flyToLocation}>\n\t\t\t\t</FireListing>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\nexport default WildfireTracker;\n","import React, { Component, Fragment } from 'react';\nimport Axios from 'axios'\nimport WildfireMap from '../WildfireMap/WildfireMap';\n\nexport class WildfireTracker extends Component {\n\n\tstate = {\n\t\tdata: [],\n\t\tdata_all: [],\n\t\tdata_fon: [],\n\t\tselected_feature: null\n\t}\n\n\tcomponentDidMount() {\n\t\tAxios.get(this.props.currentData)\n\t\t\t.then(resp => {\n\t\t\t\t// filter \"out\" fires so they don't overwhelm map\n\t\t\t\tconst noOut = {\n\t\t\t\t\ttype: 'FeatureCollection',\n\t\t\t\t\tfeatures: resp.data.features.filter(d => d.properties.FIRE_STATU !== 'Out')\n\t\t\t\t};\n\n\t\t\t\t// update our state with the new data\n\t\t\t\tthis.setState({\n\t\t\t\t\tdata: noOut,\n\t\t\t\t\tdata_all: resp.data,\n\t\t\t\t});\n\n\t\t\t\tthis.setupFiresOfNote(resp.data);\n\t\t\t});\n\n\t\tthis.flyToLocation = this.flyToLocation.bind(this);\n\t\tthis.toggleFireTypeHandler = this.toggleFireTypeHandler.bind(this);\n\t}\n\n\tsetupFiresOfNote(data) {\n\t\tconst promises = [];\n\n\t\tpromises.push(Axios.get(this.props.fonData));\n\t\tpromises.push(Axios.get(this.props.firePerimeters));\n\n\t\tAxios.all(promises)\n\t\t\t.then(results => {\n\t\t\t\t// separate our results\n\t\t\t\tconst fon_data = results.filter(d => d.config.url.includes('fon.json'))[0].data;\n\t\t\t\tconst perim_data = results.filter(d => d.config.url.includes('perimeters.json'))[0].data;\n\n\t\t\t\t// get fons from the main data set & merge the details\n\t\t\t\tconst fires_of_note = data.features.filter(d => {\n\t\t\t\t\tif (d.properties.FIRE_STATU === 'Fire of Note') {\n\t\t\t\t\t\t// get details of the fire of note\n\t\t\t\t\t\tconst fon = fon_data.filter(fon => fon.fire_id === d.properties.FIRE_NT_ID)[0];\n\n\t\t\t\t\t\t// merge data\n\t\t\t\t\t\td.properties = {...fon, ...d.properties};\n\n\t\t\t\t\t\treturn d;\n\t\t\t\t\t}\n\t\t\t\t}).filter(d => d.properties.fire_name);\n\n\t\t\t\t// update our state with the new data \n\t\t\t\tthis.setState({\n\t\t\t\t\tdata_fon: fires_of_note\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tfilterFireData(fire_class) {\n\t\t// currently, 'new' & 'out-of-control' fires are listed as new. Not sure if this is ideal. \n\t\tif (fire_class === 'new') {\n\t\t\tlet data_array = [];\n\t\t\tthis.state.data_all.features.forEach(d => {\n\t\t\t\tconst fire_status = d.properties.FIRE_STATU.replace(/\\s/g, '-').toLowerCase();\n\n\t\t\t\tif (fire_status === fire_class | fire_status === 'out-of-control') {\n\t\t\t\t\tdata_array.push(d);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn data_array;\n\t\t} else {\n\t\t\treturn this.state.data_all.features.filter(d => d.properties.FIRE_STATU.replace(/\\s/g, '-').toLowerCase() === fire_class);\n\t\t}\n\t}\n\n\tflyToLocation(e) {\n\t\t// console.log(e.target.parentNode.id)\n\t\tthis.setState({\n\t\t\tselected_feature: this.state.data_fon.filter(d => parseInt(d.properties.fire_id) === parseInt(e.target.parentNode.id))[0]\n\t\t});\n\t}\n\n\ttoggleFireTypeHandler(e) {\n\t\tlet fire_data = {\n\t\t\ttype: 'FeatureCollection'\n\t\t};\n\t\tlet fire_class = e.target.className.split(' ')[1];\n\n\n\t\tif (fire_class === this.state.data_displayed) {\n\t\t\t// keep \n\t\t\tfire_data.features = this.state.data_all.features.filter(d => d.properties.FIRE_STATU !== 'Out');\n\t\t\t// reset\n\t\t\tfire_class = null;\n\t\t} else if (fire_class === 'out') {\n\t\t\tconsole.log('OUT')\n\t\t\tfire_data = this.state.data_all;\n\t\t} else {\n\t\t\tfire_data.features = this.filterFireData(fire_class);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tdata_displayed: fire_class,\n\t\t\tdata: fire_data\n\t\t});\n\t}\n\n\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<WildfireMap \n\t\t\t\t\tconfig={this.props.mapboxConfig}\n\t\t\t\t\tselectedFeature={this.state.selected_feature}\n\t\t\t\t\tdata={this.state.data}\n\t\t\t\t\tdata_all={this.state.data_all}\n\t\t\t\t\tdata_fon={this.state.data_fon}\n\t\t\t\t\tmapboxStyle={this.props.mapboxStyle}\n\t\t\t\t\ttiles={this.props.tiles}\n\t\t\t\t\tflyToLocation={this.flyToLocation}\n\t\t\t\t\ttoggleFireTypeHandler={this.toggleFireTypeHandler}>\n\t\t\t\t</WildfireMap>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default WildfireTracker;","const mapbox_config = {\n\t\"accessToken\": \"pk.eyJ1IjoibmdyaWZmaXRocy1wb3N0bWVkaWEiLCJhIjoiY2p5eWluaDR1MHoycTNpbnZhYnE1ZGJ5YyJ9.ky9G5qVIJn0gz_y7tULp6Q\"\n};\n\nexport default mapbox_config;","import React from 'react';\nimport WildfireTracker from '../WildfireTracker/WildfireTracker';\nimport './App.css';\nimport mapboxConfig from '../../data/mapbox-config';\n\n\n// Wildfires url\nconst currentFiresURL = 'https://vs-postmedia-data.sfo2.digitaloceanspaces.com/wildfires.json';\n// Fires of note\nconst firesOfNoteURL = 'https://vs-postmedia-data.sfo2.digitaloceanspaces.com/fon.json';\n// Fire perimeters\nconst firePerimeters = 'https://vs-postmedia-data.sfo2.digitaloceanspaces.com/perimeters.json';\n\n// map tiles & attribution\nconst mapboxStyle = 'mapbox://styles/mapbox/outdoors-v11';\n\n\nfunction App() {\n\treturn (\n\t\t<WildfireTracker\n\t\t  \tfonData={firesOfNoteURL}\n\t\t\tcurrentData={currentFiresURL}\n\t\t\tfirePerimeters={firePerimeters}\n\t\t\tmapboxConfig={mapboxConfig}\n\t\t\tmapboxStyle={mapboxStyle}>\n\t\t</WildfireTracker>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport * as serviceWorker from './serviceWorker';\n\n// FONTS\nimport './fonts/BentonSansCond-Regular.otf';\nimport './fonts/BentonSansCond-RegItalic.otf';\nimport './fonts/BentonSansCond-Bold.otf';\nimport './fonts/BentonSansCond-BoldItalic.otf';\nimport './fonts/Shift-Bold.otf';\nimport './fonts/Shift-BoldItalic.otf';\n\n\n// CSS\nimport './css/index.css';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}